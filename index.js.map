{"version":3,"file":"index.js","sources":["../src/js/mobile-menu.js","../src/js/feedback-section.js"],"sourcesContent":["const menu = document.querySelector('.mobile-menu');\nconst open = document.querySelector('.js-mobile-menu');\nconst close = document.querySelector('.js-mobile-close-menu');\nconst backdrop = document.querySelector('.js-mobile-backdrop');\n\nfunction openMenu() {\n  menu.classList.add('is-open');\n  backdrop.classList.add('is-active');\n  document.body.classList.add('no-scroll');\n}\n\nfunction closeMenu() {\n  menu.classList.remove('is-open');\n  backdrop.classList.remove('is-active');\n  document.body.classList.remove('no-scroll');\n}\n\nopen.onclick = openMenu;\nclose.onclick = closeMenu;\nbackdrop.onclick = closeMenu;\n\ndocument.addEventListener('keydown', e => {\n  if (e.key === 'Escape') closeMenu();\n});\n\nmenu.querySelectorAll('a[href^=\"#\"]').forEach(link => {\n  link.onclick = closeMenu;\n});","import 'swiper/css';\nimport 'swiper/css/navigation';\nimport 'swiper/css/pagination';\nimport Swiper from 'swiper';\nimport { Navigation, Pagination, Autoplay } from 'swiper/modules';\nimport axios from 'axios';\nimport 'css-star-rating/css/star-rating.min.css';\n\nconst feedBack = document.querySelector('.swiper-wrapper');\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const swiper = new Swiper('.modal-product__slider', {\n    loop: false,\n    modules: [Navigation, Pagination, Autoplay],\n    pagination: {\n      el: '.swiper-pagination',\n      clickable: true,\n      renderBullet: function (index, className) {\n        if (index === 0)\n          return (\n            '<span class=\"' + className + ' bullet left\" data-slide=\"0\"></span>'\n          );\n        if (index === 1)\n          return (\n            '<span class=\"' +\n            className +\n            ' bullet center\" data-slide=\"middle\"></span>'\n          );\n        if (index === 2)\n          return (\n            '<span class=\"' +\n            className +\n            ' bullet right\" data-slide=\"last\"></span>'\n          );\n        return '';\n      },\n      bulletClass: 'bullet',\n      bulletActiveClass: 'swiper-pagination-bullet-active',\n    },\n    navigation: {\n      nextEl: '.custom-next',\n      prevEl: '.custom-prev',\n    },\n    autoplay: {\n      delay: 5000,\n    },\n    on: {\n      init() {\n        updateCustomBullets(this.realIndex, this.slides.length);\n        setupBulletClicks(this);\n      },\n      slideChange() {\n        updateCustomBullets(this.realIndex, this.slides.length);\n      },\n    },\n  });\n\n  async function getFeedBack() {\n    try {\n      const baseURL = 'https://sound-wave.b.goit.study/api';\n      const endPoint = '/feedbacks';\n      const url = baseURL + endPoint;\n      const params = { limit: 12 };\n      const res = await axios.get(url, { params });\n      console.log('API Data:', res.data);\n      return res.data;\n    } catch (e) {\n      console.error('Error fetching feedback:', e);\n      return null;\n    }\n  }\n\n  function createFeedBack(feedBacks) {\n    const markup = feedBacks\n      .map(({ _id, name, rating, descr }) => {\n        const roundedRating = Math.round(rating);\n        console.log('Rating for', name, ':', roundedRating);\n        return `\n          <div class=\"swiper-slide\" data-id=\"${_id || ''}\">\n            <div class=\"rating\" data-rating=\"${roundedRating}\"></div>\n            <p class='feed-back-descr'>${descr || ''}</p>\n            <p class='feed-back-name'>${name || ''}</p>\n          </div>\n        `;\n      })\n      .join('');\n\n    feedBack.innerHTML = markup;\n    initializeStarRatings(); // Ініціалізація зірок після рендерингу\n    swiper.update();\n  }\n\n  function initializeStarRatings() {\n    document.querySelectorAll('.rating').forEach(element => {\n      const rating = parseInt(element.dataset.rating);\n      if (isNaN(rating)) {\n        console.error('Invalid rating value:', element.dataset.rating);\n        return;\n      }\n      element.innerHTML = `\n        <span class=\"star-rating\">\n          ${[...Array(5)]\n            .map(\n              (_, i) =>\n                `<span class=\"star ${i < rating ? 'filled' : ''}\">★</span>`\n            )\n            .join('')}\n        </span>\n      `;\n    });\n  }\n\n  function updateCustomBullets(index, total) {\n    const bullets = document.querySelectorAll('.swiper-pagination .bullet');\n    bullets.forEach(b => b.classList.remove('swiper-pagination-bullet-active'));\n\n    if (index === 0) {\n      bullets[0].classList.add('swiper-pagination-bullet-active');\n    } else if (index === total - 1) {\n      bullets[2].classList.add('swiper-pagination-bullet-active');\n    } else {\n      bullets[1].classList.add('swiper-pagination-bullet-active');\n    }\n  }\n\n  function setupBulletClicks(swiperInstance) {\n    document.querySelector('.bullet.left')?.addEventListener('click', () => {\n      swiperInstance.slideTo(0);\n    });\n\n    document.querySelector('.bullet.center')?.addEventListener('click', () => {\n      const middleIndex = Math.floor((total - 1) / 2);\n      swiperInstance.slideTo(middleIndex);\n    });\n\n    document.querySelector('.bullet.right')?.addEventListener('click', () => {\n      swiperInstance.slideTo(swiperInstance.slides.length - 1);\n    });\n  }\n\n  getFeedBack().then(data => {\n    if (data) {\n      const feedBacks = Array.isArray(data)\n        ? data\n        : data.results || data.data || [];\n      createFeedBack(feedBacks);\n    }\n  });\n});\n"],"names":["menu","open","close","backdrop","openMenu","closeMenu","e","link","feedBack","swiper","Swiper","Navigation","Pagination","Autoplay","index","className","updateCustomBullets","setupBulletClicks","getFeedBack","url","params","res","axios","createFeedBack","feedBacks","markup","_id","name","rating","descr","roundedRating","initializeStarRatings","element","_","i","total","bullets","b","swiperInstance","_a","_b","middleIndex","_c","data"],"mappings":"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"}